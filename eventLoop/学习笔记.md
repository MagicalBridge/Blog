
## 浏览器的事件环
我们常说的js是单线程的，单线程的意思是只能在同一时间干一件事。

js中有一个全局的执行环境，我们称之为主线程、类似 setTimeOut、setInterval、ajax、onclick, 这种异步的方法或者事件,会放入单独的线程中去处理。

假设我们开三个定时器, 这三个定时器，会被放入队列中, 但是不会立即放入队列中，而是等时间到了之后才放入队列中， 假设有三个定时器，时间不固定,肯定是先执行先到时间的，后执行后到时间的。

先执行主线程的代码, 执行完毕主线程的代码后, 从事件队列中取出第一个放入主栈中开始执行。 一般将setTimeout这种认为是宏任务。 所谓的宏任务指的是那种比较大的任务。例如我们所知道的js的渲染和UI的渲染都是我们所说的宏任务。

代码执行的时候，肯定是宏任务先执行 因为script默认是一个宏任务。之后的执行过程都是先清空微任务再来执行宏任务。

作为微任务的管理同样有一个队列来管理微任务队列。

所以过程应该是这样的：

先执行主栈代码，执行后，清空一轮微任务，执行宏任务队列中的第一个，执行完后，会再次清空一轮微任务。然后再从宏任务中取出一个执行。

## 宏任务微任务
- 微任务： promsie.then、MutationObserver、process.nextTick
- 宏任务： script、ajax、 事件、 requestFrameAnimation、 setTimeout、 setInterval、 setImmediate(ie下)，MessageChannel,I/O, UI rendering

> 微任务比宏任务快，js中会先执行script脚本。

