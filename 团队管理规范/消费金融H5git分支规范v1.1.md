## 翼支付消费金融前端H5git版本规范:

### 分支规范:

  #### 分支类型:
  * `master`: 分支不做开发使用。
  * `dev`: 生产环境代码所在的分支。
  * `dev-2020xxxx`: 以dev为前缀，后面跟着xxxx代表的是窗口日期，具体日期根据发版窗口确定。
  * `dev-2020xxxx-XFJR-xxxx`: 这种在窗口分支后面添加的 `XFJR-xxxx` 后缀为需求工单号。
  * `dev-20200317-XFJR-xxxx-XFJR-8930`: 这种在需求工单号后面添加 `XFJR-8930` 后缀是开发工单号。

  #### 分支创建规范:
  * `dev`: 只有一个，此分支不作开发使用，标记线上生产稳定版本。
  * `dev-20200317`: 每个窗口只有一个，不做开发使用，所有需求分支在测试阶段都要合并到此分支打包。
  * `dev-20200317-XFJR-7890` 需求分支，不做开发使用,一个需求工单下面会挂载多个开发工单，将统一合并到对应需求分支。
  * `dev-20200317-XFJR-7890-XFJR-8930`: 开发分支，用于开发使用。

  #### 分支合并规范:
  * 1、每位开发人员在对应的开发分支上做对应开发，需求开发完成、自测完成，可以合并到对应的需求分支。
  * 2、需求分支一个版本有多个，根据测试需求，依次合并到版本分支，测试对应需求。
  * 3、需求开发完毕，全流程测试阶段，将所有的需求分支合并到版本分支，打包到46环境、综测环境。
  * 4、保证版本分支的代码是未上线前最新的代码，测试同事回归测试前需通知开发同事将版本分支合并到`dev`分支，
  * 5、回归测试阶段`dev`分支最新代码, 同时在`dev`分支进行打包，供测试回归。
  * 6、回归完毕版本封板,需要在对应封板的`commitId`上打tag,标记此次版本的稳定结束。
  * 7、tag规范 `tag/tag-20200306-紧急版` 或者 `tag/tag-20200306-常规版`

  #### 紧急版本规范:
  * 1、如线上出现需要修复的紧急问题,需要紧急修复，则在`dev`分支拉出来一个分支进行开发。
  * 2、紧急热修复版本命名规范: `dev-2020xxxx-hotfix`。
  * 3、开发完成，在对应的`hotfix`分支打包，部署46和综测环境。
  * 4、待测试需要回归的时候，将hotfix分支合并到`dev`分支,再次保证`dev`分支成为上线稳定版本。
  * 5、回归完毕版本封板,需要在对应封板的`commitid`上打上tag,标记此次版本的稳定结束。

  #### 问题修改规范;
  * 1、遇到明显的代码问题，也不能直接在`dev`分支上直接修改,对于规范层面的代码问题，需要在对应的开发分支修改，逐层合并`dev`分支
  * 2、对于紧急业务逻辑问题修复，需基于`dev` 分支拉取紧急修复分支,进行修复，逐层合并。

### 上线前需要复合的内容：
  * 1、`commitid`: 发版前一天，打好对应的回归、准生产、生产将对应的信息按照格式发布到群里面:
  * 2、使用双人复核机制,找另一位同学复核`commitid`和健康页面版本信息。
  * 3、发版当日10点之前将信息填写到发版工单内部，进行工单流转。
  * 4、打包的准生产和生产的静态资源包可以放入综测版本库的对应文件夹进行提前验证。保证加载正常。